<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <title>Prolog + HTML: –ü—Ä–æ–≥—Ä–∞–º–∞ –∑–∞ –∫–æ–ª–∏</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f2f2f2;
    }

    h1 {
      color: #333;
    }

    textarea {
      width: 100%;
      height: 120px;
      font-family: monospace;
      padding: 10px;
      margin-top: 10px;
    }

    button {
      margin-top: 10px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #007BFF;
      border: none;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }

    .output {
      margin-top: 20px;
    }

    .gif {
      margin-top: 10px;
    }

    .instructions {
      background: #fff;
      border: 1px solid #ccc;
      padding: 15px;
      margin-top: 20px;
    }

    .gif img {
      max-width: 250px;
    }
  </style>
</head>
<body>
  <h1>–ó–∞–¥–∞–Ω–∏–µ: –ü—Ä–æ–≥—Ä–∞–º–∞ —Å Prolog –∑–∞ –∫–æ–ª–∏ –∏ GIF –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</h1>

  <textarea id="prolog" placeholder="–ù–∞–ø–∏—à–µ—Ç–µ –≤–∞—à–∏—è Prolog –∫–æ–¥ —Ç—É–∫..."></textarea>
  <button onclick="runQuery()">–ò–∑–ø—ä–ª–Ω–∏ –∑–∞—è–≤–∫–∞—Ç–∞</button>

  <div class="output" id="output"></div>
  <div class="gif" id="gifContainer"></div>

  <div class="instructions">
    <h2>üìò –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:</h2>
    <p>
      –¢–æ–≤–∞ –µ –º–∞–ª–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ–µ—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞ <strong>Prolog</strong>, –∑–∞ –¥–∞ –æ—Ç–≥–æ–≤–∞—Ä—è –Ω–∞ –≤—ä–ø—Ä–æ—Å–∏ –∑–∞ –∫–æ–ª–∏.
      –°–ª–µ–¥ –∫–∞—Ç–æ –≤—ä–≤–µ–¥–µ—Ç–µ Prolog –∑–∞—è–≤–∫–∞ –∏ –Ω–∞—Ç–∏—Å–Ω–µ—Ç–µ –±—É—Ç–æ–Ω–∞, —â–µ –ø–æ–ª—É—á–∏—Ç–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏ –∏ GIF –∫–∞—Ä—Ç–∏–Ω–∫–∞, –∞–∫–æ –∏–º–∞ —Ç–∞–∫–∞–≤–∞ –∑–∞ —Å—ä–≤–ø–∞–¥–µ–Ω–∏–µ.
    </p>
    <p>
      <strong>–ü—Ä–∏–º–µ—Ä–∏:</strong><br>
      <code>luxury(X).</code><br>
      <code>is_sports(X).</code><br>
      <code>is_german(X).</code>
    </p>
    <p>
      <strong>–ö–∞–∫ –¥–∞ –¥–æ–±–∞–≤–∏—Ç–µ –Ω–æ–≤–∞ –∫–æ–ª–∞:</strong><br>
      - –î–æ–±–∞–≤–µ—Ç–µ –Ω–æ–≤ —Ä–µ–¥ –≤ <code>knowledge</code>: <code>car(lancia).</code><br>
      - –î–æ–±–∞–≤–µ—Ç–µ –∏ GIF –ª–∏–Ω–∫ –≤ <code>carAnimations</code> –æ–±–µ–∫—Ç–∞.
    </p>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/tau-prolog@0.3.2/modules/core.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tau-prolog@0.3.2/modules/lists.js"></script>
  <script>
    // Prolog knowledge base
    const knowledge = `
      car(bmw).
      car(audi).
      car(tesla).
      car(ferrari).
      car(lamborghini).
      car(toyota).

      luxury(bmw).
      luxury(audi).
      luxury(ferrari).

      sports(ferrari).
      sports(lamborghini).

      electric(tesla).

      german(bmw).
      german(audi).
      japanese(toyota).
      italian(ferrari).
      italian(lamborghini).
      american(tesla).

      is_sports(X) :- sports(X).
      is_luxury(X) :- luxury(X).
      is_electric(X) :- electric(X).
      is_german(X) :- german(X).
      is_japanese(X) :- japanese(X).
    `;

    // GIFs for each car
    const carAnimations = {
      bmw: '<img src="https://media.giphy.com/media/ZFEXgGsd6CYf3WEtYB/giphy.gif">',
      audi: '<img src="https://media.giphy.com/media/azR3lKpU8p7KE/giphy.gif">',
      tesla: '<img src="https://media.giphy.com/media/h4OGaUvN1dAe8/giphy.gif">',
      ferrari: '<img src="https://media.giphy.com/media/loJ2A3ZmYqI7a/giphy.gif">',
      lamborghini: '<img src="https://media.giphy.com/media/3ohjUOx3yHK2VZFQh6/giphy.gif">',
      toyota: '<img src="https://media.giphy.com/media/YTbZzCkRQCEJa/giphy.gif">'
    };

    function runQuery() {
      const session = pl.create();
      session.consult(knowledge);

      const query = document.getElementById("prolog").value;
      session.query(query);

      const outputDiv = document.getElementById("output");
      const gifDiv = document.getElementById("gifContainer");
      outputDiv.innerHTML = "";
      gifDiv.innerHTML = "";

      session.answers(x => {
        if (x === false || x === null) {
          outputDiv.innerHTML = "‚ùå –ù—è–º–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç.";
        } else {
          const result = session.format_answer(x);
          outputDiv.innerHTML += `<p>‚úÖ ${result}</p>`;

          // Show GIF if result includes a known car
          Object.keys(carAnimations).forEach(car => {
            if (result.includes(car)) {
              gifDiv.innerHTML = carAnimations[car];
            }
          });
        }
      });
    }
  </script>
</body>
</html>
